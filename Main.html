<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<title>List HTML Files</title>
<link rel="stylesheet" href="Main.css">
</head>
<body>
    <h1>TEST TEST TEST</h1>
    <div class="container">
        <ul id="OshiList" class="OL"></ul>
    </div>
    <script>
        function listHTMLFiles() {
        const folderPath = 'Oshi/';
        const fileListElement = document.getElementById('OshiList');

        fetch(folderPath)
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const htmlDoc = parser.parseFromString(data, 'text/html');
                const links = htmlDoc.querySelectorAll('a');
                
                links.forEach(link => {
                    const fileName = link.getAttribute('href');
                    if (fileName.endsWith('.html')) {
                        fetch(folderPath + fileName)
                            .then(response => response.text())
                            .then(htmlContent => {
                                const contentParser = new DOMParser();
                                const contentDoc = contentParser.parseFromString(htmlContent, 'text/html');
                                const title = contentDoc.title;
                                const imageSrc = contentDoc.querySelector('#EEE img').getAttribute('src');
                                const listItem = document.createElement('li');
                                listItem.className = 'col';
                                listItem.innerHTML = `
                                    <div class="col-img"><img style="max-width: 260px; max-height: 400px" src="${folderPath}${imageSrc}"></div>
                                    <br>
                                    <div class="col-text"><a href="${folderPath}${fileName}">${title}</a></div>
                                `;
                                fileListElement.appendChild(listItem);
                            })
                            .catch(error => {
                                console.error('Error. Cant fetch HTML content:', error);
                            });
                    }
                });
            })
            .catch(error => {
                console.error('Error. Cant fetch folder content:', error);
            });
    }
    window.onload = listHTMLFiles;
    </script>
  </body>
  </html>